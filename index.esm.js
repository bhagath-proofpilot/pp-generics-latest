import e,{useState as t,useRef as a}from"react";import n from"axios";var r,s=function(){function e(){}return e.getItem=function(e){var t=localStorage.getItem(this._getKey(e));try{if(t)return JSON.parse(t)}catch(a){console.error("Clearing",e,"in storage service, because it contained malformed JSON:\n",t),this.clear(e)}},e.setItem=function(e,t){JSON.stringify(t)?localStorage.setItem(this._getKey(e),JSON.stringify(t)):(console.warn("Would not store",t,"because it could not be serialized into JSON.","\nHere is the trace:"),console.trace())},e.hasItem=function(e){return null!==localStorage.getItem(this._getKey(e))},e.clear=function(e){localStorage.removeItem(this._getKey(e))},e.clearAll=function(){localStorage.clear()},e._getKey=function(e){return this._prefix+e},e._prefix="ProofPilot-",e}(),o=function(){function e(){}return e.getCountryCode=function(){var e=s.getItem("ipinfo");return e?this.COUNTRY_CODES[e.country]:null},e.isUserLoggedIn=function(){return this.me()&&this.getToken()},e.getToken=function(){return s.getItem("access_token")},e.me=function(){return s.getItem("user_id")},e.setToken=function(e){s.setItem("access_token",e)},e.setUser=function(e,t){this.setToken(e.access_token),alert("sekhar social login")},e.logOut=function(){var e=window.btoa(JSON.stringify({action:"logoutSuccessfull",token:s.getItem("access_token"),userId:s.getItem("user_id")}));if(window.opener){var t=window.opener;(function(e){t.postMessage(e,"*")})(e)}else{(function(e){window.parent.postMessage(e,"*")})(e)}["user_id","access_token","user_email","avatar","phoneNymberVerified","language","redirectAttempt","fedral","user_audience"].map((function(e){return s.clear(e)}))},e.saveUserData=function(e,t,a){this.setToken(t),s.setItem("user_id",e.id),s.setItem("language",e.language),s.setItem("user_email",e.pii.emails[0]&&e.pii.emails[0].email||e.primaryPhone),s.setItem("is_super_admin",e.isSuperAdmin),s.setItem("avatar",e.avatar),s.setItem("phoneNymberVerified",{verified:!(e.pii.phones.length>0)||e.pii.phones[0].verified})},e.storeUserData=function(e,t,a){this.setToken(t),s.setItem("user_id",e.id),s.setItem("language",e.language),s.setItem("user_audience",e.audienceType),s.setItem("user_email",e.pii.emails[0]&&e.pii.emails[0].email||e.primaryPhone),s.setItem("is_super_admin",e.isSuperAdmin),s.setItem("avatar",e.avatar),s.setItem("phoneNymberVerified",{verified:!(e.pii.phones.length>0)||e.pii.phones[0].verified})},e.COUNTRY_CODES={AS:"+1",AI:"+1",AG:"+1",BS:"+1",BB:"+1",BM:"+1",VG:"+1",CA:"+1",KY:"+1",DM:"+1",DO:"+1",GD:"+1",GU:"+1",JM:"+1",MP:"+1",PR:"+1",KN:"+1",LC:"+1",VC:"+1",MF:"+1",TT:"+1",TC:"+1",US:"+1",VI:"+1",UA:"+38",DK:"+45"},e}(),c=function(){function e(){}return e.validateLogin=function(e){if(this.emailRegExp.test(e))return"email";var t=e.replace(/[^\w]+/g,"");return!!this.phoneRegExp.test(t)&&"phone"},e.formatPhone=function(e){return this.fixPhone(e).replace(/(\+\d+)?(\d{3})(\d{3})(\d{4})/,"$1 ($2) $3-$4").trim()},e.fixPhone=function(e){if("phone"!=this.validateLogin(e))return e;var t=e.replace(/[^\w\+]+/g,"");if(0==t.indexOf("+"))return t;var a=o.getCountryCode();return a?a+t:t},e.emailRegExp=/((^[a-zA-Z\-\][\w.+]+@(proofpilot|cyclogram)\.com$)|(^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$))/,e.phoneRegExp=/^\+?\d{8,20}$/,e}(),l=function(){return l=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},l.apply(this,arguments)},i=function(){function e(){}return e.setAPIBaseURL=function(e){this.apiBaseUrl=e.apiBaseURL,n.defaults.baseURL=e.baseURL},e.getAxios=function(){return n},e.get=function(e,t){return n(this.payload("GET",e,t))},e.post=function(e,t){return n(this.payload("POST",e,t))},e.put=function(e,t){return n(this.payload("PUT",e,t))},e.patch=function(e,t){return n(this.payload("PATCH",e,t))},e.delete=function(e,t){return n(this.payload("DELETE",e,t))},e.payload=function(e,t,a){var n=l({},a||{}),r=this.buildUrl(t,a||{});return l({url:r,method:e},n)},e.buildUrl=function(t,a){var n,r=this,s=(a.baseURL||e.apiBaseUrl)+t,o=a||{};return o.paramsData&&(null===(n=a.paramsData)||void 0===n||n.forEach((function(e){s=r.mapParams(s,e[0],e[1])}))),o.queryParams&&(s+=this.buildQuery(a.queryParams)),o.queryParamsArray&&(s+=this.buildQuery(a.queryParamsArray)),s},e.mapParams=function(e,t,a){return e.replace(t,a)},e.buildQuery=function(e){if(!e)return"";var t="",a=0;if(Array.isArray(e))return e.forEach((function(e,a){t+=0===a?"?"+e[0]+"="+e[1]:"&"+e[0]+"="+e[1]})),t;for(var n in e)t+=0===a?"?"+n+"="+e[n]:"&"+n+"="+e[n],a++;return t},e.apiBaseUrl="",e}();function m(a){var n=t(!1),l=n[0],m=n[1],u=t(""),d=u[0],f=u[1],p=t(""),v=p[0],h=p[1],E=t(!1),g=E[0],b=E[1],N=t(!1),y=N[0],w=N[1],_=t(!1),P=_[0],x=_[1],k=t(""),A=k[0],C=k[1];return e.createElement("div",{className:"auth-container login-box d-flex justify-content-center"},e.createElement("div",{className:"auth-main"},e.createElement("div",{className:"logo-container"},e.createElement("div",{className:"logo-box"})),e.createElement("div",{className:"main-text mt-1"},"Log In sekhar sadgsadg"),e.createElement("div",{className:"sub-text"},"Continue with one of the following"),e.createElement("div",{className:"social-login-btn-container"},e.createElement("div",{className:"row"},e.createElement("div",{className:"col"},e.createElement("div",{className:"d-flex justify-content-center"},e.createElement("button",{className:"social-login-btn",onClick:function(){var e,t=(screen.availWidth-800)/2,n=(screen.availHeight-600)/2,r={usedHost:"https://go-stagingnew.proofpilot.com",client_id:"1_4bme99a1m2o00gowg04w00ccscg0gg0sksossg8w4cg4gw4wgw",client_secret:"1d3y4o0qiv8ks4s4ogkswk44cks4kk8k0o4sogoco4w4k0g4sk"},o=document.createElement("form");for(var c in o.setAttribute("method","POST"),o.setAttribute("action","https://api-test.proofpilot.com/social/google"),o.setAttribute("target","formresult"),o.setAttribute("style","display: none;"),r){var l=document.createElement("input");l.setAttribute("name",c),l.setAttribute("value",r[c]),o.appendChild(l)}return document.body.appendChild(o),e=window.open("","formresult","top=".concat(n,", left=").concat(t,", width=800, height=600")),o.submit(),document.body.removeChild(o),window.addEventListener("message",(function(t){var n=JSON.parse(t.data);e&&n.access_token?(e.close(),window.socialAuthResponse=n,s.setItem("fedral",!0),a.socialLoginSubmit&&a.socialLoginSubmit(window.socialAuthResponse)):e&&e.close()})),!1}},e.createElement("div",{className:"social-btn-wrapper"},e.createElement("div",{className:"social-btn-logo google"}),e.createElement("div",{className:"social-btn-spacer"}),e.createElement("div",{className:"social-btn-text"},"Google"))))),e.createElement("div",{className:"col"},e.createElement("div",{className:"d-flex justify-content-center"},e.createElement("button",{className:"social-login-btn"},e.createElement("div",{className:"social-btn-wrapper"},e.createElement("div",{className:"social-btn-logo google"}),e.createElement("div",{className:"social-btn-spacer"}),e.createElement("div",{className:"social-btn-text"},"Microsoft"))))),e.createElement("div",{className:"col"},e.createElement("div",{className:"d-flex justify-content-center"},e.createElement("button",{className:"social-login-btn"},e.createElement("div",{className:"social-btn-wrapper"},e.createElement("div",{className:"social-btn-logo google"}),e.createElement("div",{className:"social-btn-spacer"}),e.createElement("div",{className:"social-btn-text"},"Apple"))))),e.createElement("div",{className:"col"},e.createElement("div",{className:"d-flex justify-content-center"},e.createElement("button",{className:"social-login-btn"},e.createElement("div",{className:"social-btn-wrapper"},e.createElement("div",{className:"social-btn-logo google"}),e.createElement("div",{className:"social-btn-spacer"}),e.createElement("div",{className:"social-btn-text"},"Single Sign-On"))))))),e.createElement("div",{className:"sub-text"},"It's faster, easier, and more secure."),e.createElement("div",{className:"circle-with-line-in-center d-flex justify-content-center"},e.createElement("div",{className:"main-circle"},"or")),e.createElement("div",{className:"form-fields"},e.createElement("div",{className:"mb-4"},e.createElement("label",{htmlFor:"email",className:"form-label"},"E-mail or phone number"),e.createElement("input",{type:"email",className:"form-control "+(y&&!l?"field-error-border":""),id:"email",onChange:function(e){var t=c.validateLogin(e.target.value);m(!!t),"phone"===t&&(e.target.value=c.formatPhone(e.target.value)),f(e.target.value)},value:d,onBlur:function(){w(!0)}}),y&&!l&&e.createElement("p",{className:"field-error"},"Login is not correct")),e.createElement("div",{className:"mb-3"},e.createElement("label",{htmlFor:"password",className:"form-label d-flex justify-content-between"},e.createElement("div",null,"Password"),e.createElement("div",null,e.createElement("a",{href:"#",onClick:function(){a.resetPage&&a.resetPage()}},"I've forgotten my password"))),e.createElement("input",{type:"password",className:"form-control "+(P&&!g?"field-error-border":""),id:"password",onChange:function(e){e.target.value?b(!0):b(!1),h(e.target.value)},onBlur:function(){x(!0)}}),P&&!g&&e.createElement("p",{className:"field-error"},"Enter Password"),A&&e.createElement("p",{className:"field-error",dangerouslySetInnerHTML:{__html:A}})),e.createElement("div",{className:"form-check"},e.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault"}),e.createElement("label",{className:"form-check-label",htmlFor:"flexCheckDefault"},"Keep me logged in for 30 days"))),e.createElement("div",{className:"small-text"},"Use this feature in combination with your device security features to make it easier to log in and use ProofPilot. If you share your device with others or do not use device security features, do not use this feature."),e.createElement("div",{className:"mt-4 mb-2 text-center"},e.createElement("button",{type:"button",className:"btn btn-primary auth-action-btn",onClick:function(){if(w(!0),x(!0),y&&l&&P&&g){var e="".concat(r.AuthUrl);i.post(e,{apiBaseUrl:"/oauth/v2",data:{username:d,password:v,remember_me:!0,client_id:process.env.REACT_APP_CLIENT_ID,client_secret:process.env.REACT_APP_CLIENT_SECRET,grant_type:process.env.REACT_APP_GRANT_TYPE}}).then((function(e){o.setToken(e.data.access_token),i.get("/me",{baseUrl:""}).then((function(e){alert("social login done")})).catch((function(){alert("social login error")}))})).catch((function(e){-1!=e.response.status?422===e.response.data.code?C("Wrong password"):403===e.response.data.code&&C('At ProofPIlot we take security very seriously. For various reasons, your account has been locked. If you did not receive an e-mail or SMS to reset your account,<a href="/reset">please click here to manually initiate a reset.</a>'):C("Error connecting to server.")}))}}},"Sign In")),e.createElement("div",{className:"sub-text mb-4"},"Don't have an account? ",e.createElement("a",{href:"#",onClick:function(){a.signUp&&a.signUp()}},"Create one here.")),e.createElement("div",{className:"small-text mb-2"},"ProofPilot takes your security and privacy seriously. We collect contact information to secure access to the sensitive information you share.")))}!function(e){e.AuthUrl="/token",e.ResetUrl="/users/resetting/send",e.Register="/register",e.GoogleUrl="/google"}(r||(r={}));var u=function(n){var s=t(!0),l=s[0],m=s[1],u=t(!1),d=u[0],f=u[1],p=t(""),v=p[0],h=p[1],E=t(!1),g=E[0],b=E[1],N=t(""),y=N[0],w=N[1],_=a(null),P=a(null),x=t(""),k=x[0],A=x[1],C=function(){n.loginPage()},I=function(){var e,t,a,n,r=new RegExp(/^[a-zA-Z0-9!@#\$%\^\&*\)\(+=._-]{8,}$/);r.test((null===(e=_.current)||void 0===e?void 0:e.value)||"")&&r.test((null===(t=P.current)||void 0===t?void 0:t.value)||"")?(null===(a=_.current)||void 0===a?void 0:a.value)===(null===(n=P.current)||void 0===n?void 0:n.value)?w(""):w("Passwords should match"):w("Minimum 8 characters with 1 letter & 1 number")};return e.createElement(e.Fragment,null,e.createElement("div",{className:"auth-container auth-container-wide "+(l?"d-flex":"d-none")},e.createElement("div",{className:"auth-aside d-flex justify-content-center"},e.createElement("div",{className:"auth-aside-container"},e.createElement("div",{className:"auth-aside-heading"},"Participate"),e.createElement("div",{className:"auth-aside-sub-heading"},"in research, learn about yourself, and earn rewards."))),e.createElement("div",{className:"auth-main d-flex justify-content-center"},e.createElement("div",{className:"auth-main-spacer"},e.createElement("div",{className:"logo-container"},e.createElement("div",{className:"logo-box"})),e.createElement("div",{className:"main-text mt-1"},"Join ProofPilot"),e.createElement("div",{className:"sub-text"},"Continue with one of the following"),e.createElement("div",{className:"social-login-btn-container"},e.createElement("div",{className:"row"},e.createElement("div",{className:"col"},e.createElement("div",{className:"d-flex justify-content-center"},e.createElement("button",{className:"social-login-btn"},e.createElement("div",{className:"social-btn-wrapper"},e.createElement("div",{className:"social-btn-logo google"}),e.createElement("div",{className:"social-btn-spacer"}),e.createElement("div",{className:"social-btn-text"},"Google"))))),e.createElement("div",{className:"col"},e.createElement("div",{className:"d-flex justify-content-center"},e.createElement("button",{className:"social-login-btn"},e.createElement("div",{className:"social-btn-wrapper"},e.createElement("div",{className:"social-btn-logo google"}),e.createElement("div",{className:"social-btn-spacer"}),e.createElement("div",{className:"social-btn-text"},"Microsoft"))))),e.createElement("div",{className:"col"},e.createElement("div",{className:"d-flex justify-content-center"},e.createElement("button",{className:"social-login-btn"},e.createElement("div",{className:"social-btn-wrapper"},e.createElement("div",{className:"social-btn-logo google"}),e.createElement("div",{className:"social-btn-spacer"}),e.createElement("div",{className:"social-btn-text"},"Apple"))))),e.createElement("div",{className:"col"},e.createElement("div",{className:"d-flex justify-content-center"},e.createElement("button",{className:"social-login-btn"},e.createElement("div",{className:"social-btn-wrapper"},e.createElement("div",{className:"social-btn-logo google"}),e.createElement("div",{className:"social-btn-spacer"}),e.createElement("div",{className:"social-btn-text"},"Single Sign-On"))))))),e.createElement("div",{className:"sub-text"},"It's faster, easier, and more secure."),e.createElement("div",{className:"circle-with-line-in-center d-flex justify-content-center"},e.createElement("div",{className:"main-circle"},"or")),e.createElement("div",{className:"form-fields"},e.createElement("div",{className:"mb-4"},e.createElement("label",{htmlFor:"email",className:"form-label"},"E-mail or phone number"),e.createElement("input",{type:"email",className:"form-control "+(g&&!d?"field-error-border":""),onChange:function(e){var t=c.validateLogin(e.target.value);f(!!t),"phone"===t&&(e.target.value=c.formatPhone(e.target.value)),h(e.target.value)},id:"email",value:v,onBlur:function(e){b(!0)}}),g&&!d&&e.createElement("p",{className:"field-error"},"Login is not correct"),k&&e.createElement("p",{className:"field-error",dangerouslySetInnerHTML:{__html:k}}))),e.createElement("div",{className:"mt-4 mb-2 text-center"},e.createElement("button",{type:"button",className:"btn btn-primary auth-action-btn",onClick:function(){var e,t;(b(!0),g&&d)&&(e={email:v,password:"dummy password just to check if user exist"},t="".concat(r.AuthUrl),i.post(t,{baseUrl:"/oauth/v2",data:{username:e.email,password:e.password,client_id:process.env.REACT_APP_CLIENT_ID,client_secret:process.env.REACT_APP_CLIENT_SECRET,grant_type:process.env.REACT_APP_GRANT_TYPE}}).then((function(e){})).catch((function(e){422===e.response.data.code&&"Invalid password!"===e.response.data.description?A("Your Account already exists. Please login to your account"):404===e.response.data.code?m(!1):403===e.response.data.code&&A('At ProofPIlot we take security very seriously. For various reasons, your account has been locked. If you did not receive an e-mail or SMS to reset your account,<a href="/reset">please click here to manually initiate a reset.</a>')})))}},"Continue")),e.createElement("div",{className:"sub-text mb-4"},"Already have an account? ",e.createElement("a",{href:"#",onClick:C},"Log In here.")),e.createElement("div",{className:"small-text mb-2"},"ProofPilot takes your security and privacy seriously. We collect contact information to secure access to the sensitive information you share.")))),e.createElement("div",{className:"auth-container auth-container-wide "+(l?"d-none":"d-flex")},e.createElement("div",{className:"auth-aside d-flex justify-content-center"},e.createElement("div",{className:"auth-aside-container"},e.createElement("div",{className:"auth-aside-heading"},"Participate"),e.createElement("div",{className:"auth-aside-sub-heading"},"in research, learn about yourself, and earn rewards."))),e.createElement("div",{className:"auth-main d-flex justify-content-center"},e.createElement("div",{className:"auth-main-spacer"},e.createElement("div",{className:"sub-text"},"Let's finish creating your account for"),e.createElement("div",{className:"sub-text dynamic"},"john+smith@somedomain.com"),e.createElement("div",{className:"form-fields"},e.createElement("div",{className:"mb-4"},e.createElement("label",{htmlFor:"password",className:"form-label"},"Please choose your password"),e.createElement("input",{type:"password",className:"form-control "+(y?"field-error-border":""),id:"password",ref:_,onChange:I}),e.createElement("span",{className:"form-info-text"},"Minimum 8 characters with 1 letter and 1 number."),y&&e.createElement("p",{className:"field-error"},y)),e.createElement("div",{className:"mb-4"},e.createElement("label",{htmlFor:"repassword",className:"form-label"},"Please re-type your password"),e.createElement("input",{type:"password",className:"form-control "+(y?"field-error-border":""),id:"repassword",ref:P,onChange:I}),y&&e.createElement("p",{className:"field-error"},y)),e.createElement("div",{className:"form-check"},e.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault"}),e.createElement("label",{className:"form-check-label",htmlFor:"flexCheckDefault"},"Keep me logged in for 30 days"))),e.createElement("div",{className:"small-text"},"Use this feature in combination with your device security features to make it easier to log in and use ProofPilot. If you share your device with others or do not use device security features, do not use this feature."),e.createElement("div",{className:"mt-4 mb-2 text-center"},e.createElement("button",{type:"button",className:"btn btn-primary auth-action-btn",onClick:function(){var e;if(I(),!y){var t,a,n={email:v,password:null===(e=_.current)||void 0===e?void 0:e.value,keepmeLogIn:!0};t=n,a="".concat(r.Register),i.post(a,{baseUrl:"",data:{registration:{username:t.email,fullname:t.email,plainPassword:t.password,remember_me:t.keepmeLogIn},client_id:process.env.REACT_APP_CLIENT_ID,client_secret:process.env.REACT_APP_CLIENT_SECRET,usedHost:window.location.protocol+"://"+window.location.hostname}}).then((function(e){var a="".concat(r.AuthUrl);i.post(a,{baseUrl:"/oauth/v2",data:{username:t.email,password:t.password,remember_me:t.keepmeLogIn,client_id:process.env.REACT_APP_CLIENT_ID,client_secret:process.env.REACT_APP_CLIENT_SECRET,grant_type:process.env.REACT_APP_GRANT_TYPE}}).then((function(e){o.setToken(e.data.access_token)})).catch((function(e){alert("raj fail")}))})).catch((function(e){alert("raj fail")}))}}},"Create Account and Log in")),e.createElement("div",{className:"sub-text mb-4"},"Already have an account? ",e.createElement("a",{href:"#",onClick:C},"Log in here.")),e.createElement("div",{className:"small-text mb-2"},"By continuing, you agree to periodic communications and reminders from ProofPilot. Any data you share with ProofPilot is secured and encrypted and will only be provided to studies with your expressed permission. Before you join each study, we'll tell you all you need to know about the risks and rights you have. We use cookies to improve your user experience.")))))},d=function(a){var n=t(""),s=n[0],o=n[1];function l(e){window.location.pathname="/login"}return e.createElement("div",{className:"auth-container d-flex justify-content-center"},e.createElement("div",{className:"auth-main"},e.createElement("div",{className:"logo-container"},e.createElement("div",{className:"logo-box"})),e.createElement("div",{className:"main-text mt-1"},"Forgot your password?"),e.createElement("div",{className:"form-fields mt-5"},e.createElement("div",{className:"mb-4"},e.createElement("label",{htmlFor:"email",className:"form-label"},"What is your email or phone number"),e.createElement("input",{type:"email",className:"form-control",id:"email",value:s,onChange:function(e){e.target.value=c.formatPhone(e.target.value),o(e.target.value)}}))),e.createElement("div",{className:"mt-4 mb-2 text-center"},e.createElement("button",{type:"button",className:"btn btn-primary auth-action-btn",onClick:function(){var e,t;s.includes("@")||o(s.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\\ \.\*\?\|\<\>\-\&])/g,"").replace("+","00")),e=s,t="".concat(r.ResetUrl),i.post(t,{baseUrl:"",data:{username:e,client_id:process.env.REACT_APP_CLIENT_ID,client_secret:process.env.REACT_APP_CLIENT_SECRET,resetLink:window.location.protocol+"://"+window.location.host+"/changePassword",usedHost:window.location.protocol+"://"+window.location.host}}).then(l).catch((function(e){console.log(e)})),o("")}},"Reset My Password")),e.createElement("div",{className:"sub-text mb-4 mt-4"},"I remember my password. ",e.createElement("a",{href:"#",onClick:function(){a.loginPage()}},"Sign in now.")),e.createElement("div",{className:"small-text mb-2"},"ProofPilot takes your security and privacy seriously. We collect contact information to secure access to the sensitive information you share.")))};function f(){return n.interceptors}export{i as HttpClient,f as HttpInterCepter,m as Login,d as ResetPassword,u as SignUp};
//# sourceMappingURL=index.esm.js.map
